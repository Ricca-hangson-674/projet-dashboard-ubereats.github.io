{"version":3,"sources":["views/commercants/DetailCommercant.js","configs/variable.js","components/Message.js","components/Loader.js","provider/userFetch.js"],"names":["DetailCommercant","id","useParams","history","useHistory","useState","commercant","setCommercant","error","setError","useEffect","a","getUsers","resp","status","data","console","log","fetch","deleteFunction","deleteUser","push","xs","className","sm","color","onClick","_id","firstName","lastName","email","createdAt","restaurants","length","map","r","name","variable","env","endpointLocal","endpointProd","endpointFront","Message","variant","children","defaultProps","Loader","type","config","headers","endpoint","url","axios","get","message","response","delete","registerUser","user","reponse","put","post","authentification"],"mappings":"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","file":"static/js/24.7f784a17.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CTable,\r\n  CTableBody,\r\n  CTableDataCell,\r\n  CTableRow,\r\n  CButtonGroup,\r\n  CButton,\r\n} from \"@coreui/react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\n\r\nimport Loader from \"../../components/Loader\";\r\nimport Message from \"../../components/Message\";\r\nimport { Authentification } from \"../../components/index\";\r\n\r\nimport { getUsers, deleteUser } from \"../../provider/userFetch\";\r\n\r\nconst DetailCommercant = () => {\r\n  /**Params Route */\r\n  let { id } = useParams();\r\n  let history = useHistory();\r\n\r\n  /** State */\r\n  const [commercant, setCommercant] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  /** Run once, when the component mounts */\r\n  useEffect(() => {\r\n    console.log(\"Run once, when the component mounts\");\r\n\r\n    async function fetch() {\r\n      const resp = await getUsers(null, id);\r\n\r\n      resp?.status ? setCommercant(resp?.data) : setError(resp?.error);\r\n    }\r\n\r\n    fetch();\r\n  }, [id]);\r\n\r\n  const back = () => {\r\n    history.push(`/commercants`);\r\n  };\r\n\r\n  const deleteFunction = async (id) => {\r\n    const resp = await deleteUser(id);\r\n\r\n    if (resp.status) {\r\n      history.push(`/commercants`);\r\n    }\r\n  };\r\n\r\n  if (commercant === null) {\r\n    return <Loader />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Message> {error}</Message>;\r\n  }\r\n  return (\r\n    <>\r\n      <Authentification />\r\n      <CRow>\r\n        <CCol xs={12}>\r\n          <CCard className=\"mb-4\">\r\n            <CCardHeader>\r\n              <CRow>\r\n                <CCol sm={5}>\r\n                  <strong>commercant {id}</strong>\r\n                </CCol>\r\n                <CCol sm={7}>\r\n                  <CButtonGroup className=\"float-end me-3\">\r\n                    <CButton\r\n                      color=\"outline-secondary\"\r\n                      className=\"mx-1\"\r\n                      onClick={() => back()}\r\n                    >\r\n                      Retour\r\n                    </CButton>\r\n                    <CButton\r\n                      color=\"outline-danger\"\r\n                      className=\"mx-0\"\r\n                      onClick={() => deleteFunction(commercant?._id)}\r\n                    >\r\n                      Suppprimer\r\n                    </CButton>\r\n                  </CButtonGroup>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CTable>\r\n                <CTableBody>\r\n                  <CTableRow>\r\n                    <CTableDataCell>firstName</CTableDataCell>\r\n                    <CTableDataCell>{commercant.firstName}</CTableDataCell>\r\n                  </CTableRow>\r\n                  <CTableRow>\r\n                    <CTableDataCell>lastName</CTableDataCell>\r\n                    <CTableDataCell>{commercant.lastName}</CTableDataCell>\r\n                  </CTableRow>\r\n                  <CTableRow>\r\n                    <CTableDataCell>email</CTableDataCell>\r\n                    <CTableDataCell>{commercant.email}</CTableDataCell>\r\n                  </CTableRow>\r\n                  <CTableRow>\r\n                    <CTableDataCell>Creation</CTableDataCell>\r\n                    <CTableDataCell>{commercant.createdAt}</CTableDataCell>\r\n                  </CTableRow>\r\n                  <CTableRow>\r\n                    <CTableDataCell>Restaurants</CTableDataCell>\r\n                    <CTableDataCell>\r\n                      {commercant.restaurants.length ? (\r\n                        commercant.restaurants.map((r) => (\r\n                          <span key={r._id}>\r\n                            {r.name} {\" || \"}{\" \"}\r\n                          </span>\r\n                        ))\r\n                      ) : (\r\n                        <h3>{\"NO Items\"}</h3>\r\n                      )}\r\n                    </CTableDataCell>\r\n                  </CTableRow>\r\n                </CTableBody>\r\n              </CTable>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n      </CRow>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DetailCommercant;\r\n","export const variable = {\r\n    env: 'prod', // local | prod\r\n    endpointLocal: 'http://127.0.0.1:5059',\r\n    endpointProd:'https://projet-eats-nrh.herokuapp.com',\r\n    endpointFront:'http://localhost:3232',\r\n}","import React from 'react'\r\nimport {CAlert} from '@coreui/react'\r\n\r\nconst Message = ({variant, children}) => {\r\n    return <CAlert color={variant}>\r\n        { children }\r\n    </CAlert>\r\n}\r\n\r\nMessage.defaultProps = {\r\n    variant: 'info'\r\n}\r\n\r\nexport default Message\r\n","import React from 'react'\r\nimport {CSpinner} from '@coreui/react'\r\n\r\nconst Loader = () => {\r\n    return <>\r\n    <CSpinner color=\"primary\" >\r\n        <span className='sr-only'>Loading ...</span>\r\n    </CSpinner>\r\n    </>\r\n}\r\n\r\nexport default Loader","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getUsers = async (type = null, id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let url = null\r\n\r\n        if (id) {\r\n            url  = `${endpoint}/api/users/${id}`\r\n        } else if (type) {\r\n            url  = `${endpoint}/api/users?type=${type}`\r\n        } else {\r\n            url = `${endpoint}/api/users`\r\n        }\r\n\r\n        const { data } = await axios.get(`${url}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const deleteUser = async (id) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.delete(`${endpoint}/api/users/${id}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const registerUser = async (user, id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let reponse = null\r\n\r\n        if (id) {\r\n            reponse =  await axios.put(`${endpoint}/api/users/${id}`, user, config)\r\n        } else {\r\n            reponse =  await axios.post(`${endpoint}/api/users`, user, config)\r\n        }\r\n\r\n        return {status: true, data: reponse?.data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const authentification =  async (user) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.post(`${endpoint}/api/users/login`, user, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n\r\n}"],"sourceRoot":""}