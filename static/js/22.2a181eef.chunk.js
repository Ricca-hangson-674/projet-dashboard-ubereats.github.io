(this["webpackJsonpprojet-uber-eats-dashboard"]=this["webpackJsonpprojet-uber-eats-dashboard"]||[]).push([[22],{550:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={env:"prod",endpointLocal:"http://127.0.0.1:5059",endpointProd:"https://projet-eats-nrh.herokuapp.com"}},551:function(e,t,r){"use strict";r(0);var a=r(4),n=r(2),i=function(e){var t=e.variant,r=e.children;return Object(n.jsx)(a.a,{color:t,children:r})};i.defaultProps={variant:"info"},t.a=i},775:function(e,t,r){"use strict";r.r(t);var a=r(28),n=r(548),i=r.n(n),o=r(549),s=r(552),c=r(0),l=r(4),d=r(174),u=r(561),p=r(568),j=r(566),b=r(26),h=r(52),v=r(551),O=r(554),m=r.n(O),x=r(550),f=function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,a,n,o,s,c,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:null,e.prev=1,r={headers:{"Content-Type":"application/json"}},a="local"===x.a.env?x.a.endpointLocal:x.a.endpointProd,n=t?"".concat(a,"/api/foods/").concat(t):"".concat(a,"/api/foods"),e.next=7,m.a.get("".concat(n),r);case 7:return o=e.sent,s=o.data,e.abrupt("return",{status:!0,data:s});case 12:return e.prev=12,e.t0=e.catch(1),c=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,e.abrupt("return",{status:!1,error:c});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,n,o,s,c,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:null,e.prev=1,n={headers:{"Content-Type":"application/json"}},o="local"===x.a.env?x.a.endpointLocal:x.a.endpointProd,s=null,!r){e.next=11;break}return e.next=8,m.a.put("".concat(o,"/api/foods/").concat(r),t,n);case 8:s=e.sent,e.next=14;break;case 11:return e.next=13,m.a.post("".concat(o,"/api/foods"),t,n);case 13:s=e.sent;case 14:return e.abrupt("return",{status:!0,data:null===(a=s)||void 0===a?void 0:a.data});case 17:return e.prev=17,e.t0=e.catch(1),c=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,e.abrupt("return",{status:!1,error:c});case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),y=r(2),w=j.d().shape({name:j.f().required("name is required"),description:j.f().required("description is required"),price:j.c().required("price are required"),priceDrop:j.c(),category:j.f().required("category are required"),optionLists:j.a().required("optionLists are required"),isPopular:j.b(),available:j.b(),promotion:j.b()});t.default=function(){var e,t,r,n,j=Object(c.useState)(null),O=Object(s.a)(j,2),m=O[0],x=O[1],L=Object(c.useState)(!1),P=Object(s.a)(L,2),q=P[0],k=P[1],A=Object(c.useState)(!1),D=Object(s.a)(A,2),S=D[0],N=D[1],C=Object(b.g)(),F=Object(b.i)().id,T=window.location.hash,z=new URLSearchParams(T.substring(T.lastIndexOf("?"))),R=z.has("restaurant")?z.get("restaurant"):"restaurant",V=z.has("category")?z.get("category"):"category",B=z.has("optionLists")?z.get("optionLists"):[];console.log("params",T.substring(T.lastIndexOf("?")),V,B,R);var E=Object(u.d)({resolver:Object(p.a)(w),mode:"onTouched",defaultValues:{optionLists:B,category:V}}),I=E.register,J=E.handleSubmit,U=E.formState,G=U.errors,H=U.isSubmitting,K=U.isValid,M=E.resetField,Q=E.setValue;Object(c.useEffect)((function(){if(console.log("Run once, when the component mounts"),F){var e=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(null,F);case 2:(null===(t=e.sent)||void 0===t?void 0:t.status)?(Q("name",null===t||void 0===t?void 0:t.data.name),Q("description",null===t||void 0===t?void 0:t.data.description),Q("price",null===t||void 0===t?void 0:t.data.price),Q("priceDrop",null===t||void 0===t?void 0:t.data.priceDrop),Q("category",null===t||void 0===t?void 0:t.data.category),Q("optionLists",null===t||void 0===t?void 0:t.data.optionLists),Q("isPopular",null===t||void 0===t?void 0:t.data.isPopular),Q("available",null===t||void 0===t?void 0:t.data.available),Q("promotion",null===t||void 0===t?void 0:t.data.promotion)):x(null===t||void 0===t?void 0:t.error);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[F,Q]);var W=function(){var e=Object(o.a)(i.a.mark((function e(t){var r,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,!K){e.next=7;break}return k(!1),N(!1),e.next=6,g(t,F);case 6:a=e.sent;case 7:(null===(r=a)||void 0===r?void 0:r.status)?(M("name"),M("description"),M("price"),M("priceDrop"),M("category"),M("optionLists"),M("isPopular"),M("available"),M("promotion"),k(!0)):(N(!0),x(null===(n=a)||void 0===n?void 0:n.error));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(l.P,{children:[Object(y.jsx)(d.f,{}),S&&Object(y.jsxs)(v.a,{children:[" ",m]}),q&&Object(y.jsxs)(v.a,{children:[" ","Success Ajout ou Edite"]}),Object(y.jsx)(l.o,{xs:12,children:Object(y.jsxs)(l.h,{className:"mb-4",children:[Object(y.jsx)(l.l,{children:Object(y.jsxs)(l.P,{children:[Object(y.jsx)(l.o,{sm:5,children:Object(y.jsx)("strong",{children:"Ajout Food"})}),Object(y.jsx)(l.o,{sm:7,children:Object(y.jsx)(l.g,{className:"float-end me-3",children:Object(y.jsx)(l.f,{color:"outline-secondary",className:"mx-0",onClick:function(){C.push("/restaurants")},children:"Retour"})})})]})}),Object(y.jsx)(l.i,{children:Object(y.jsxs)(l.x,{className:"row g-3 needs-validation ".concat(K&&"was-validated"),onSubmit:J(W),children:[Object(y.jsxs)(l.o,{md:6,children:[Object(y.jsx)(l.A,{htmlFor:"name",children:"Name"}),Object(y.jsx)(l.z,Object(a.a)({type:"text",id:"name",required:!0},I("name"))),Object(y.jsx)(l.y,{invalid:!0,children:null===(e=G.name)||void 0===e?void 0:e.message})]}),Object(y.jsxs)(l.o,{md:6,children:[Object(y.jsx)(l.A,{htmlFor:"lastName",children:"Description"}),Object(y.jsx)(l.z,Object(a.a)({type:"text",id:"description",required:!0},I("description"))),Object(y.jsx)(l.y,{invalid:!0,children:null===(t=G.description)||void 0===t?void 0:t.message})]}),Object(y.jsxs)(l.o,{md:6,children:[Object(y.jsx)(l.A,{htmlFor:"price",children:"Price"}),Object(y.jsx)(l.z,Object(a.a)({type:"number",id:"price",required:!0},I("price"))),Object(y.jsx)(l.y,{invalid:!0,children:null===(r=G.price)||void 0===r?void 0:r.message})]}),Object(y.jsxs)(l.o,{md:6,children:[Object(y.jsx)(l.A,{htmlFor:"priceDrop",children:"PriceDrop"}),Object(y.jsx)(l.z,Object(a.a)({type:"number",id:"priceDrop",required:!0},I("priceDrop"))),Object(y.jsx)(l.y,{invalid:!0,children:null===(n=G.priceDrop)||void 0===n?void 0:n.message})]}),Object(y.jsx)(l.o,{md:3,children:Object(y.jsx)(l.C,Object(a.a)({label:"isPopular",id:"isPopular"},I("isPopular")))}),Object(y.jsx)(l.o,{md:3,children:Object(y.jsx)(l.C,Object(a.a)({label:"available",id:"available"},I("available")))}),Object(y.jsx)(l.o,{md:3,children:Object(y.jsx)(l.C,Object(a.a)({label:"promotion",id:"promotion"},I("promotion")))}),Object(y.jsxs)(l.o,{md:6,children:[Object(y.jsx)(l.A,{htmlFor:"categorie",children:"Categorie"}),Object(y.jsxs)(l.B,{"aria-label":"Categorie",id:"categorie",children:[Object(y.jsx)("option",{disabled:!0,children:"..."}),Object(y.jsx)("option",{value:"1",children:"One"}),Object(y.jsx)("option",{value:"2",children:"Two"}),Object(y.jsx)("option",{value:"3",children:"Three"})]}),Object(y.jsxs)("small",{className:"form-text text-muted",children:[Object(y.jsx)(h.b,{to:"/ajout-categorie?restaurant=".concat(R),children:"Ajouter une categorie"})," "]})]}),Object(y.jsxs)(l.o,{md:6,children:[Object(y.jsx)(l.A,{htmlFor:"optionLists",children:"Option Liste"}),Object(y.jsxs)(l.B,{size:"lg",multiple:!0,"aria-label":"Option Liste",id:"optionLists",children:[Object(y.jsx)("option",{value:"1",children:"One"}),Object(y.jsx)("option",{value:"2",children:"Two"}),Object(y.jsx)("option",{value:"3",children:"Three"})]}),Object(y.jsxs)("small",{className:"form-text text-muted",children:[Object(y.jsx)(h.b,{to:"/ajout-optionList?foods=".concat("foods","&options=","options"),children:"Ajouter un option Liste"})," "]})]}),Object(y.jsx)(l.o,{xs:12,children:Object(y.jsx)(l.f,{color:"primary",type:"submit",className:H?"disabled":" ",children:"Submit"})})]})})]})})]})}}}]);
//# sourceMappingURL=22.2a181eef.chunk.js.map