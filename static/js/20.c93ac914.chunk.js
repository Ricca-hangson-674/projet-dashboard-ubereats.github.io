(this["webpackJsonpprojet-uber-eats-dashboard"]=this["webpackJsonpprojet-uber-eats-dashboard"]||[]).push([[20],{552:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={env:"prod",endpointLocal:"http://127.0.0.1:5059",endpointProd:"https://projet-eats-nrh.herokuapp.com"}},553:function(e,t,a){"use strict";a(0);var n=a(4),r=a(2),s=function(e){var t=e.variant,a=e.children;return Object(r.jsx)(n.a,{color:t,children:a})};s.defaultProps={variant:"info"},t.a=s},557:function(e,t,a){"use strict";a(0);var n=a(4),r=a(2);t.a=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(n.U,{color:"primary",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading ..."})})})}},798:function(e,t,a){"use strict";a.r(t);var n=a(571),r=a(558),s=a(550),c=a.n(s),o=a(28),i=a(551),l=a(554),u=a(0),d=a(759),j=a.n(d),b=a(4),p=a(634),h=a(635),f=a(174),O=a(555),v=a.n(O),m=a(552),x=function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"}},a="local"===m.a.env?m.a.endpointLocal:m.a.endpointProd,n="".concat(a,"/api/dashboard"),e.next=6,v.a.get("".concat(n),t);case 6:return r=e.sent,s=r.data,e.abrupt("return",{status:!0,data:s});case 11:return e.prev=11,e.t0=e.catch(0),o=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,e.abrupt("return",{status:!1,error:o});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n,r,s,o,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={headers:{"Content-Type":"application/json"}},n="local"===m.a.env?m.a.endpointLocal:m.a.endpointProd,r="".concat(n,"/api/dashboard/chiffres-affaires"),e.next=6,v.a.post("".concat(r),t,a);case 6:return s=e.sent,o=s.data,e.abrupt("return",{status:!0,data:o});case 11:return e.prev=11,e.t0=e.catch(0),i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,e.abrupt("return",{status:!1,error:i});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),y=a(557),N=a(553),C=a(2),Y=Object(u.lazy)((function(){return a.e(31).then(a.bind(null,797))}));t.default=function(){var e=Object(u.useState)(null),t=Object(l.a)(e,2),a=t[0],s=t[1],d=Object(u.useState)(null),O=Object(l.a)(d,2),v=O[0],m=O[1],D=Object(u.useState)(null),S=Object(l.a)(D,2),E=S[0],A=S[1],M=Object(u.useState)(null),R=Object(l.a)(M,2),k=R[0],I=R[1],w=Object(u.useState)("Day"),T=Object(l.a)(w,2),P=T[0],B=T[1],G=Object(u.useState)("READING"),L=Object(l.a)(G,2),F=L[0],W=L[1],_=Object(u.useState)(null),H=Object(l.a)(_,2),U=H[0],J=H[1],z=Object(u.useState)(null),Z=Object(l.a)(z,2),q=Z[0],K=Z[1];Object(u.useEffect)((function(){function e(){return(e=Object(i.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t=e.sent,e.next=5,g();case 5:a=e.sent,(null===t||void 0===t?void 0:t.status)?s(Object(o.a)({},null===t||void 0===t?void 0:t.data)):A(null===t||void 0===t?void 0:t.error),(null===a||void 0===a?void 0:a.status)?m(Object(o.a)({},null===a||void 0===a?void 0:a.data)):I(null===a||void 0===a?void 0:a.error);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("Run once, when the component mounts"),function(){e.apply(this,arguments)}()}),[]),Object(u.useEffect)((function(){var e;console.log("Dependency");var t,a=[],s=[],c=[];if("Day"===P)(null===v||void 0===v||null===(t=v.ordersChiffres)||void 0===t?void 0:t.length)&&(c=Object(r.a)(null===v||void 0===v?void 0:v.ordersChiffres));else if("Month"===P){var o;(null===v||void 0===v||null===(o=v.ordersChiffresGroupedByMonthWithStatus)||void 0===o?void 0:o.length)&&(c=Object(r.a)(null===v||void 0===v?void 0:v.ordersChiffresGroupedByMonthWithStatus))}else if("Year"===P){var i;(null===v||void 0===v||null===(i=v.ordersChiffresGroupedByYearWithStatus)||void 0===i?void 0:i.length)&&(c=Object(r.a)(null===v||void 0===v?void 0:v.ordersChiffresGroupedByYearWithStatus))}if(null===(e=c)||void 0===e?void 0:e.length){var l,u=Object(n.a)(c);try{for(u.s();!(l=u.n()).done;){var d=l.value;F===d.status&&("Day"===P?(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("DD/MM/YYYY")]),s=[].concat(Object(r.a)(s),[d.total])):"Month"===P?(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("MM/YYYY")]),s=[].concat(Object(r.a)(s),[d.total])):"Year"===P&&(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("YYYY")]),s=[].concat(Object(r.a)(s),[d.total])))}}catch(b){u.e(b)}finally{u.f()}K(Object(r.a)(s)),J(Object(r.a)(a))}}),[F,P,v]);var Q=function(e,t){"status"===t?W(e):"type"===t&&B(e)};return console.log("chiffreAffaires",v),console.log("labels",U,q,P,F),null===a||null===v?Object(C.jsx)(y.a,{}):k?Object(C.jsxs)(N.a,{children:[" ",k]}):E?Object(C.jsxs)(N.a,{children:[" ",E]}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(f.f,{}),Object(C.jsx)(Y,{}),Object(C.jsxs)(b.h,{className:"mb-4",children:[Object(C.jsxs)(b.i,{children:[Object(C.jsxs)(b.P,{children:[Object(C.jsxs)(b.o,{sm:5,children:[Object(C.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Commandes"}),Object(C.jsx)("div",{className:"small text-medium-emphasis",children:j()().format("DD/MMM/YYYY h:mm:ss A")})]}),Object(C.jsxs)(b.o,{sm:7,className:"d-none d-md-block",children:[Object(C.jsx)(b.B,{value:F,"aria-label":"Status",className:"float-end mb-1",onChange:function(e){Q(e.target.value,"status")},children:["ORDER_STATUS_UNSPECIFIED","CONFIRMED","PENDING","PENDING_MERCHANT_CONFIRMATION","CANCELED","FAILED","DECLINED_BY_MERCHANT","READING"].map((function(e){return Object(C.jsx)("option",{value:e,children:e},e)}))}),Object(C.jsx)(b.g,{className:"float-end me-3",children:["Day","Month","Year"].map((function(e){return Object(C.jsx)(b.f,{onClick:function(){return Q(e,"type")},color:"outline-secondary",className:"mx-0",active:e===P,children:e},e)}))})]})]}),Object(C.jsx)(p.b,{style:{height:"300px",marginTop:"40px"},data:{labels:null!==U?Object(r.a)(U):[],datasets:[{label:"Commandes par ".concat(P),backgroundColor:Object(h.hexToRgba)(Object(h.getStyle)("--cui-info"),10),borderColor:Object(h.getStyle)("--cui-info"),pointHoverBackgroundColor:Object(h.getStyle)("--cui-info"),borderWidth:2,data:null!==q?Object(r.a)(q):[],fill:!0}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{drawOnChartArea:!1}},y:{ticks:{beginAtZero:!0,maxTicksLimit:5}}},elements:{line:{tension:.4},point:{height:5,radius:5,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}})]}),Object(C.jsx)(b.j,{children:Object(C.jsx)(b.P,{xs:{cols:1},md:{cols:5},className:"text-center",children:a.orderStat.map((function(e,t){return Object(C.jsxs)(b.o,{className:"mb-sm-2 mb-0",children:[Object(C.jsx)("div",{className:"text-medium-emphasis",children:e.title}),Object(C.jsxs)("strong",{children:[e.value," (",e.percent,"%)"]}),Object(C.jsx)(b.O,{thin:!0,className:"mt-2",color:e.color,value:(null===e||void 0===e?void 0:e.percent)?Number(null===e||void 0===e?void 0:e.percent):0})]},t)}))})})]})]})}}}]);
//# sourceMappingURL=20.c93ac914.chunk.js.map