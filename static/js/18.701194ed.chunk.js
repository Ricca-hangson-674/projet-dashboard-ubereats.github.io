(this["webpackJsonpprojet-uber-eats-dashboard"]=this["webpackJsonpprojet-uber-eats-dashboard"]||[]).push([[18],{1254:function(t,e,a){"use strict";a.r(e);var n=a(577),r=a(565),c=a(555),s=a.n(c),o=a(27),i=a(556),l=a(564),u=a(0),d=a(626),j=a.n(d),b=a(4),p=a(926),h=a(927),f=a(174),O=a(645),v=a(563),m=a(558),x=a(2),g=Object(u.lazy)((function(){return a.e(38).then(a.bind(null,1248))}));e.default=function(){var t=Object(u.useState)(null),e=Object(l.a)(t,2),a=e[0],c=e[1],d=Object(u.useState)(null),y=Object(l.a)(d,2),C=y[0],N=y[1],D=Object(u.useState)(null),S=Object(l.a)(D,2),Y=S[0],A=S[1],E=Object(u.useState)(null),M=Object(l.a)(E,2),R=M[0],k=M[1],I=Object(u.useState)("Day"),T=Object(l.a)(I,2),w=T[0],B=T[1],G=Object(u.useState)("READING"),L=Object(l.a)(G,2),F=L[0],P=L[1],W=Object(u.useState)(null),_=Object(l.a)(W,2),U=_[0],H=_[1],J=Object(u.useState)(null),Z=Object(l.a)(J,2),z=Z[0],q=Z[1];Object(u.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var e,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.b)();case 2:return e=t.sent,t.next=5,Object(O.a)();case 5:a=t.sent,(null===e||void 0===e?void 0:e.status)?c(Object(o.a)({},null===e||void 0===e?void 0:e.data)):A(null===e||void 0===e?void 0:e.error),(null===a||void 0===a?void 0:a.status)?N(Object(o.a)({},null===a||void 0===a?void 0:a.data)):k(null===a||void 0===a?void 0:a.error);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("Run once, when the component mounts"),function(){t.apply(this,arguments)}()}),[]),Object(u.useEffect)((function(){var t;console.log("Dependency");var e,a=[],c=[],s=[];if("Day"===w)(null===C||void 0===C||null===(e=C.ordersChiffresGroupedByDayStatus)||void 0===e?void 0:e.length)&&(s=Object(r.a)(null===C||void 0===C?void 0:C.ordersChiffresGroupedByDayStatus));else if("Month"===w){var o;(null===C||void 0===C||null===(o=C.ordersChiffresGroupedByMonthWithStatus)||void 0===o?void 0:o.length)&&(s=Object(r.a)(null===C||void 0===C?void 0:C.ordersChiffresGroupedByMonthWithStatus))}else if("Year"===w){var i;(null===C||void 0===C||null===(i=C.ordersChiffresGroupedByYearWithStatus)||void 0===i?void 0:i.length)&&(s=Object(r.a)(null===C||void 0===C?void 0:C.ordersChiffresGroupedByYearWithStatus))}if(null===(t=s)||void 0===t?void 0:t.length){var l,u=Object(n.a)(s);try{for(u.s();!(l=u.n()).done;){var d=l.value;F===d.status&&("Day"===w?(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("DD/MM/YYYY")]),c=[].concat(Object(r.a)(c),[d.total])):"Month"===w?(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("MM/YYYY")]),c=[].concat(Object(r.a)(c),[d.total])):"Year"===w&&(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("YYYY")]),c=[].concat(Object(r.a)(c),[d.total])))}}catch(b){u.e(b)}finally{u.f()}q(Object(r.a)(c)),H(Object(r.a)(a))}}),[F,w,C]);var K=function(t,e){"status"===e?P(t):"type"===e&&B(t)};return null===a||null===C?Object(x.jsx)(v.a,{}):R?Object(x.jsxs)(m.a,{children:[" ",R]}):Y?Object(x.jsxs)(m.a,{children:[" ",Y]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f.f,{}),Object(x.jsx)(g,{countClient:a.countClient,countCommercant:a.countCommercant,countAdmin:a.countAdmin,countOrder:a.countOrder}),Object(x.jsxs)(b.h,{className:"mb-4",children:[Object(x.jsxs)(b.i,{children:[Object(x.jsxs)(b.U,{children:[Object(x.jsxs)(b.o,{sm:5,children:[Object(x.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Commandes"}),Object(x.jsx)("div",{className:"small text-medium-emphasis",children:j()().format("DD/MMM/YYYY h:mm:ss A")})]}),Object(x.jsxs)(b.o,{sm:7,className:"d-none d-md-block",children:[Object(x.jsx)(b.B,{value:F,"aria-label":"Status",className:"float-end mb-1",onChange:function(t){K(t.target.value,"status")},children:["ORDER_STATUS_UNSPECIFIED","CONFIRMED","PENDING","PENDING_MERCHANT_CONFIRMATION","CANCELED","FAILED","DECLINED_BY_MERCHANT","READING"].map((function(t){return Object(x.jsx)("option",{value:t,children:t},t)}))}),Object(x.jsx)(b.g,{className:"float-end me-3",children:["Day","Month","Year"].map((function(t){return Object(x.jsx)(b.f,{onClick:function(){return K(t,"type")},color:"outline-secondary",className:"mx-0",active:t===w,children:t},t)}))})]})]}),Object(x.jsx)(p.a,{style:{height:"300px",marginTop:"40px"},data:{labels:null!==U?Object(r.a)(U):[],datasets:[{label:"Commandes par ".concat(w),backgroundColor:Object(h.hexToRgba)(Object(h.getStyle)("--cui-info"),10),borderColor:Object(h.getStyle)("--cui-info"),pointHoverBackgroundColor:Object(h.getStyle)("--cui-info"),borderWidth:2,data:null!==z?Object(r.a)(z):[],fill:!0}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{drawOnChartArea:!1}},y:{ticks:{beginAtZero:!0,maxTicksLimit:5}}},elements:{line:{tension:.4},point:{height:5,radius:5,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}})]}),Object(x.jsx)(b.j,{children:Object(x.jsx)(b.U,{xs:{cols:1},md:{cols:5},className:"text-center",children:a.orderStat.map((function(t,e){return Object(x.jsxs)(b.o,{className:"mb-sm-2 mb-0",children:[Object(x.jsx)("div",{className:"text-medium-emphasis",children:t.title}),Object(x.jsxs)("strong",{children:[t.value," (",t.percent,"%)"]}),Object(x.jsx)(b.T,{thin:!0,className:"mt-2",color:t.color,value:(null===t||void 0===t?void 0:t.percent)?Number(null===t||void 0===t?void 0:t.percent):0})]},e)}))})})]})]})}},553:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={env:"prod",endpointLocal:"http://127.0.0.1:5059",endpointProd:"https://projet-eats-nrh.herokuapp.com",endpointFront:"http://localhost:3232"}},558:function(t,e,a){"use strict";a(0);var n=a(4),r=a(2),c=function(t){var e=t.variant,a=t.children;return Object(r.jsx)(n.a,{color:e,children:a})};c.defaultProps={variant:"info"},e.a=c},563:function(t,e,a){"use strict";a(0);var n=a(4),r=a(2);e.a=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(n.Z,{color:"primary",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading ..."})})})}},645:function(t,e,a){"use strict";a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return u}));var n=a(555),r=a.n(n),c=a(556),s=a(562),o=a.n(s),i=a(553),l=function(){var t=Object(c.a)(r.a.mark((function t(){var e,a,n,c,s,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={headers:{"Content-Type":"application/json"}},a="local"===i.a.env?i.a.endpointLocal:i.a.endpointProd,n="".concat(a,"/api/dashboard"),t.next=6,o.a.get("".concat(n),e);case 6:return c=t.sent,s=c.data,t.abrupt("return",{status:!0,data:s});case 11:return t.prev=11,t.t0=t.catch(0),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,t.abrupt("return",{status:!1,error:l});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(c.a)(r.a.mark((function t(e){var a,n,c,s,l,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{"Content-Type":"application/json"}},n="local"===i.a.env?i.a.endpointLocal:i.a.endpointProd,c="".concat(n,"/api/dashboard/chiffres-affaires"),t.next=6,o.a.post("".concat(c),e,a);case 6:return s=t.sent,l=s.data,t.abrupt("return",{status:!0,data:l});case 11:return t.prev=11,t.t0=t.catch(0),u=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,t.abrupt("return",{status:!1,error:u});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=18.701194ed.chunk.js.map