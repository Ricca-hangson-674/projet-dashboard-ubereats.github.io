{"version":3,"sources":["configs/variable.js","components/Message.js","components/Loader.js","provider/discoveryTableFetch.js","views/discoveryTable/DiscoveryTable.js"],"names":["variable","env","endpointLocal","endpointProd","Message","variant","children","color","defaultProps","Loader","className","getDiscoveryTables","a","idRestaurant","idDiscoveryTable","config","headers","endpoint","url","axios","get","data","status","message","response","error","updateDiscoverytable","body","mode","post","put","console","log","Discoverytable","useState","discoveryTables","setDiscoveryTables","setError","visible","setVisible","idQRCode","setIdQRCode","history","useHistory","useParams","useEffect","resp","discoverytable","fetch","deleteFunction","id","old","filter","u","_id","edit","push","xs","sm","onClick","scope","length","map","d","code","size","onClose","value"],"mappings":"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","file":"static/js/19.2143ec5b.chunk.js","sourcesContent":["export const variable = {\r\n    env: 'prod', // local | prod\r\n    endpointLocal: 'http://127.0.0.1:5059',\r\n    endpointProd:'https://projet-eats-nrh.herokuapp.com',\r\n}","import React from 'react'\r\nimport {CAlert} from '@coreui/react'\r\n\r\nconst Message = ({variant, children}) => {\r\n    return <CAlert color={variant}>\r\n        { children }\r\n    </CAlert>\r\n}\r\n\r\nMessage.defaultProps = {\r\n    variant: 'info'\r\n}\r\n\r\nexport default Message\r\n","import React from 'react'\r\nimport {CSpinner} from '@coreui/react'\r\n\r\nconst Loader = () => {\r\n    return <>\r\n    <CSpinner color=\"primary\" >\r\n        <span className='sr-only'>Loading ...</span>\r\n    </CSpinner>\r\n    </>\r\n}\r\n\r\nexport default Loader","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getDiscoveryTables = async (\r\n  idRestaurant = null,\r\n  idDiscoveryTable = null\r\n) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }\r\n\r\n    const endpoint =\r\n      variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n    const url = idDiscoveryTable\r\n      ? `${endpoint}/api/restaurants/${idRestaurant}/discoverytable?id=${idDiscoveryTable}`\r\n      : `${endpoint}/api/restaurants/${idRestaurant}/discoverytable`\r\n\r\n    const { data } = await axios.get(`${url}`, config)\r\n\r\n    return { status: true, data }\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message\r\n\r\n    return { status: false, error: message }\r\n  }\r\n}\r\n\r\nexport const updateDiscoverytable = async (\r\n  idRestaurant,\r\n  body,\r\n  mode = 'post'\r\n) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }\r\n\r\n    const endpoint =\r\n      variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n    let data = null\r\n\r\n    if (mode === 'post') {\r\n      data = await axios.post(\r\n        `${endpoint}/api/restaurants/${idRestaurant}/discoverytable`,\r\n        body,\r\n        config\r\n      )\r\n    } else if (mode === 'update') {\r\n      data = await axios.put(\r\n        `${endpoint}/api/restaurants/${idRestaurant}/discoverytable`,\r\n        body,\r\n        config\r\n      )\r\n    }\r\n\r\n    console.log('data', data)\r\n\r\n    return { status: true, data }\r\n  } catch (error) {\r\n    const message =\r\n      error.response && error.response.data.message\r\n        ? error.response.data.message\r\n        : error.message\r\n\r\n    return { status: false, error: message }\r\n  }\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CTable,\r\n  CTableBody,\r\n  CTableDataCell,\r\n  CTableHead,\r\n  CTableHeaderCell,\r\n  CTableRow,\r\n  CButton,\r\n  CButtonGroup,\r\n  CModal,\r\n  CModalHeader,\r\n  CModalBody,\r\n  CModalFooter,\r\n  CModalTitle,\r\n} from '@coreui/react'\r\n\r\nimport QRCode from 'react-qr-code'\r\n\r\nimport { variable } from '../../configs/variable'\r\n\r\nimport { useHistory, useParams } from 'react-router-dom'\r\n\r\nimport Loader from '../../components/Loader'\r\nimport Message from '../../components/Message'\r\nimport { Authentification } from '../../components/index'\r\n\r\nimport {\r\n  getDiscoveryTables,\r\n  updateDiscoverytable,\r\n} from '../../provider/discoveryTableFetch'\r\n\r\n// import { variable } from '../../configs/variable'\r\n\r\nconst Discoverytable = () => {\r\n  /** State */\r\n  const [discoveryTables, setDiscoveryTables] = useState(null)\r\n  const [error, setError] = useState(null)\r\n  const [visible, setVisible] = useState(false)\r\n  const [idQRCode, setIdQRCode] = useState(null)\r\n\r\n  /** Hook Route */\r\n  let history = useHistory()\r\n  let { idRestaurant } = useParams()\r\n\r\n  /** Run once, when the component mounts */\r\n  useEffect(() => {\r\n    console.log('Dependency', idRestaurant)\r\n\r\n    async function fetch() {\r\n      const resp = await getDiscoveryTables(idRestaurant)\r\n\r\n      resp?.status\r\n        ? setDiscoveryTables([...resp?.data?.discoverytable])\r\n        : setError(resp?.error)\r\n    }\r\n\r\n    fetch()\r\n  }, [idRestaurant])\r\n\r\n  const deleteFunction = async (id) => {\r\n    const resp = await updateDiscoverytable(idRestaurant, { id }, 'update')\r\n\r\n    if (resp.status) {\r\n      setDiscoveryTables((old) => old.filter((u) => u._id !== id))\r\n    }\r\n  }\r\n\r\n  const edit = (idRestaurant, idDiscoveryTable) => {\r\n    history.push(`/edit-discovery-table/${idRestaurant}?d=${idDiscoveryTable}`)\r\n  }\r\n\r\n  const generateQRCode = (id) => {\r\n    setVisible(true)\r\n    setIdQRCode(id)\r\n  }\r\n\r\n  if (discoveryTables === null) {\r\n    return <Loader />\r\n  }\r\n\r\n  if (error) {\r\n    return <Message> {error}</Message>\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CRow>\r\n        <Authentification />\r\n        <CCol xs={12}>\r\n          <CCard className=\"mb-4\">\r\n            <CCardHeader>\r\n              <CRow>\r\n                <CCol sm={5}>\r\n                  <strong>Listes des DisciveryTables</strong>\r\n                </CCol>\r\n                <CCol sm={7}>\r\n                  <CButtonGroup className=\"float-end me-3\">\r\n                    <CButton\r\n                      color=\"outline-secondary\"\r\n                      className=\"mx-0\"\r\n                      onClick={() => edit(idRestaurant, 'default')}\r\n                    >\r\n                      Ajout\r\n                    </CButton>\r\n                  </CButtonGroup>\r\n                </CCol>\r\n              </CRow>\r\n            </CCardHeader>\r\n            <CCardBody>\r\n              <CTable>\r\n                <CTableHead>\r\n                  <CTableRow>\r\n                    <CTableHeaderCell scope=\"col\">Code</CTableHeaderCell>\r\n                    <CTableHeaderCell scope=\"col\">Actions</CTableHeaderCell>\r\n                  </CTableRow>\r\n                </CTableHead>\r\n                <CTableBody>\r\n                  {discoveryTables.length > 0 ? (\r\n                    discoveryTables.map((d) => (\r\n                      <CTableRow key={d._id}>\r\n                        <CTableDataCell>{d.code}</CTableDataCell>\r\n                        <CTableDataCell>\r\n                          <CButton\r\n                            color={'secondary'}\r\n                            className=\"m-1\"\r\n                            onClick={() => edit(idRestaurant, d._id)}\r\n                          >\r\n                            {' '}\r\n                            Editer{' '}\r\n                          </CButton>\r\n                          <CButton\r\n                            color={'danger'}\r\n                            className=\"m-1\"\r\n                            onClick={() => deleteFunction(d._id)}\r\n                          >\r\n                            {' '}\r\n                            Supprimer{' '}\r\n                          </CButton>\r\n                          <CButton\r\n                            color={'secondary'}\r\n                            onClick={() => generateQRCode(d._id)}\r\n                          >\r\n                            {' '}\r\n                            QR code{' '}\r\n                          </CButton>\r\n                        </CTableDataCell>\r\n                      </CTableRow>\r\n                    ))\r\n                  ) : (\r\n                    <h3>{'NO Items'}</h3>\r\n                  )}\r\n                </CTableBody>\r\n              </CTable>\r\n            </CCardBody>\r\n          </CCard>\r\n        </CCol>\r\n      </CRow>\r\n      <CModal size=\"lg\" visible={visible} onClose={() => setVisible(false)}>\r\n        <CModalHeader onClose={() => setVisible(false)}>\r\n          <CModalTitle>QR Code</CModalTitle>\r\n        </CModalHeader>\r\n        <CModalBody>\r\n          <QRCode\r\n            value={`${variable.endpointProd}?discovery-table=${idQRCode}`}\r\n          />\r\n        </CModalBody>\r\n        <CModalFooter>\r\n          <CButton color=\"secondary\" onClick={() => setVisible(false)}>\r\n            Close\r\n          </CButton>\r\n        </CModalFooter>\r\n      </CModal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Discoverytable\r\n"],"sourceRoot":""}