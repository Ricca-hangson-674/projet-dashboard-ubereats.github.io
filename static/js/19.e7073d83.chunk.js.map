{"version":3,"sources":["views/commandes/Commandes.js","configs/variable.js","components/Message.js","components/Loader.js","provider/orderFetch.js"],"names":["Commandes","useState","orders","setOrders","error","setError","status","setStatus","history","useHistory","useEffect","a","getOrders","resp","data","console","log","fetch","changeStatus","xs","className","sm","map","value","color","active","onClick","scope","length","order","numero","email","moment","createdAt","format","id","_id","push","variable","env","endpointLocal","endpointProd","endpointFront","Message","variant","children","defaultProps","Loader","config","headers","endpoint","url","axios","get","message","response"],"mappings":"6RAgJeA,UAtHG,WAEhB,MAA4BC,mBAAS,MAArC,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAA0BF,mBAAS,MAAnC,mBAAOG,EAAP,KAAcC,EAAd,KACA,EAA4BJ,mBAAS,MAArC,mBAAOK,EAAP,KAAeC,EAAf,KAGIC,EAAUC,cAGdC,qBAAU,WAAM,4CAGd,4BAAAC,EAAA,sEACqBC,cADrB,QAGM,QAFEC,EADR,cAGM,IAAJA,OAAA,EAAAA,EAAMP,QAASH,EAAU,YAAD,OAAKU,QAAL,IAAKA,OAAL,EAAKA,EAAMC,OAAST,EAAQ,OAACQ,QAAD,IAACA,OAAD,EAACA,EAAMT,OAH7D,4CAHc,sBACdW,QAAQC,IAAI,uCADE,mCASdC,KACC,IAEH,IAAMC,EAAY,uCAAG,WAAOZ,GAAP,eAAAK,EAAA,sEACAC,YAAU,KAAMN,GADhB,OACbO,EADa,OAGnBN,EAAUD,GAENO,EAAKP,QACPH,EAAU,YAAD,OAAKU,QAAL,IAAKA,OAAL,EAAKA,EAAMC,OANH,2CAAH,sDAclB,OAAe,OAAXZ,EACK,cAAC,IAAD,IAGLE,EACK,eAAC,IAAD,eAAWA,KAIlB,eAAC,IAAD,WACE,cAAC,IAAD,IACA,cAAC,IAAD,CAAMe,GAAI,GAAV,SACE,eAAC,IAAD,CAAOC,UAAU,OAAjB,UACE,cAAC,IAAD,UACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAMC,GAAI,EAAV,SACE,4DAEF,cAAC,IAAD,CAAMA,GAAI,EAAGD,UAAU,oBAAvB,SACE,cAAC,IAAD,CAAcA,UAAU,iBAAxB,SACG,CAAC,YAAa,UAAW,wBAAwBE,KAChD,SAACC,GAAD,OACE,cAAC,IAAD,CACEC,MAAM,oBAENJ,UAAU,OACVK,OAAQF,IAAUjB,EAClBoB,QAAS,kBAAMR,EAAaK,IAL9B,SAOGA,GALIA,eAanB,cAAC,IAAD,UACE,eAAC,KAAD,WACE,cAAC,KAAD,UACE,eAAC,KAAD,WACE,cAAC,KAAD,CAAkBI,MAAM,MAAxB,oBACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,mBACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,oBACA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,8BAGA,cAAC,KAAD,CAAkBA,MAAM,MAAxB,0BAGJ,cAAC,KAAD,UACGzB,EAAO0B,OAAS,EACf1B,EAAOoB,KAAI,SAACO,GAAD,OACT,eAAC,KAAD,WACE,cAAC,KAAD,UAAiBA,EAAMC,SACvB,cAAC,KAAD,UAAiBD,EAAME,QACvB,cAAC,KAAD,UAAiBF,EAAMvB,SACvB,cAAC,KAAD,UAAiB0B,IAAOH,EAAMI,WAAWC,OAAO,qBAChD,cAAC,KAAD,UACE,eAAC,IAAD,CACEV,MAAO,UACPJ,UAAU,OACVM,QAAS,kBAlEPS,EAkE8BN,EAAMO,SAjE5D5B,EAAQ6B,KAAR,2BAAiCF,IADV,IAACA,GA+DJ,UAKG,IALH,OAMO,WAZKN,EAAMO,QAkBxB,6BAAK,8B,iCCrIvB,kCAAO,IAAME,EAAW,CACpBC,IAAK,OACLC,cAAe,wBACfC,aAAa,wCACbC,cAAc,0B,iCCJlB,uBAGMC,EAAU,SAAC,GAAyB,IAAxBC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,SACvB,OAAO,cAAC,IAAD,CAAQrB,MAAOoB,EAAf,SACDC,KAIVF,EAAQG,aAAe,CACnBF,QAAS,QAGED,O,iCCbf,uBAWeI,IARA,WACX,OAAO,mCACP,cAAC,IAAD,CAAUvB,MAAM,UAAhB,SACI,sBAAMJ,UAAU,UAAhB,+B,6HCHKR,EAAS,uCAAG,sDAAAD,EAAA,6DAAOwB,EAAP,+BAAY,KAAM7B,EAAlB,+BAA2B,KAA3B,SAGX0C,EAAS,CACXC,QAAS,CACL,eAAgB,qBAIlBC,EAA4B,UAAjBZ,IAASC,IAAkBD,IAASE,cAAgBF,IAASG,aAE1EU,EAAM,KAGNA,EADAhB,EACG,UAAMe,EAAN,uBAA6Bf,GACzB7B,EACJ,UAAM4C,EAAN,8BAAoC5C,GAEpC,UAAM4C,EAAN,eAlBU,SAqBME,IAAMC,IAAN,UAAaF,GAAOH,GArB1B,uBAqBTlC,EArBS,EAqBTA,KArBS,kBAuBV,CAACR,QAAQ,EAAMQ,SAvBL,yCAyBXwC,EAAU,KAAMC,UAAY,KAAMA,SAASzC,KAAKwC,QAC5C,KAAMC,SAASzC,KAAKwC,QACpB,KAAMA,QA3BC,kBA6BV,CAAChD,QAAQ,EAAOF,MAAOkD,IA7Bb,0DAAH","file":"static/js/19.e7073d83.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CTable,\r\n  CTableBody,\r\n  CTableDataCell,\r\n  CTableHead,\r\n  CTableHeaderCell,\r\n  CTableRow,\r\n  CButton,\r\n  CButtonGroup,\r\n} from \"@coreui/react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Loader from \"../../components/Loader\";\r\nimport Message from \"../../components/Message\";\r\nimport { Authentification } from \"../../components/index\";\r\n\r\nimport { getOrders } from \"../../provider/orderFetch\";\r\n\r\nimport moment from \"moment\";\r\n\r\nconst Commandes = () => {\r\n  /** State */\r\n  const [orders, setOrders] = useState(null);\r\n  const [error, setError] = useState(null);\r\n  const [status, setStatus] = useState(null);\r\n\r\n  /** Hook Route */\r\n  let history = useHistory();\r\n\r\n  /** Run once, when the component mounts */\r\n  useEffect(() => {\r\n    console.log(\"Run once, when the component mounts\");\r\n\r\n    async function fetch() {\r\n      const resp = await getOrders();\r\n\r\n      resp?.status ? setOrders([...resp?.data]) : setError(resp?.error);\r\n    }\r\n\r\n    fetch();\r\n  }, []);\r\n\r\n  const changeStatus = async (status) => {\r\n    const resp = await getOrders(null, status);\r\n\r\n    setStatus(status);\r\n\r\n    if (resp.status) {\r\n      setOrders([...resp?.data]);\r\n    }\r\n  };\r\n\r\n  const handleNavigation = (id) => {\r\n    history.push(`/detail-commande/${id}`);\r\n  };\r\n\r\n  if (orders === null) {\r\n    return <Loader />;\r\n  }\r\n\r\n  if (error) {\r\n    return <Message> {error}</Message>;\r\n  }\r\n\r\n  return (\r\n    <CRow>\r\n      <Authentification />\r\n      <CCol xs={12}>\r\n        <CCard className=\"mb-4\">\r\n          <CCardHeader>\r\n            <CRow>\r\n              <CCol sm={5}>\r\n                <strong>Listes des commandes</strong>\r\n              </CCol>\r\n              <CCol sm={7} className=\"d-none d-md-block\">\r\n                <CButtonGroup className=\"float-end me-3\">\r\n                  {[\"CONFIRMED\", \"READING\", \"DECLINED_BY_MERCHANT\"].map(\r\n                    (value) => (\r\n                      <CButton\r\n                        color=\"outline-secondary\"\r\n                        key={value}\r\n                        className=\"mx-0\"\r\n                        active={value === status}\r\n                        onClick={() => changeStatus(value)}\r\n                      >\r\n                        {value}\r\n                      </CButton>\r\n                    )\r\n                  )}\r\n                </CButtonGroup>\r\n              </CCol>\r\n            </CRow>\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <CTable>\r\n              <CTableHead>\r\n                <CTableRow>\r\n                  <CTableHeaderCell scope=\"col\">Numero</CTableHeaderCell>\r\n                  <CTableHeaderCell scope=\"col\">Email</CTableHeaderCell>\r\n                  <CTableHeaderCell scope=\"col\">Status</CTableHeaderCell>\r\n                  <CTableHeaderCell scope=\"col\">\r\n                    Date de creation\r\n                  </CTableHeaderCell>\r\n                  <CTableHeaderCell scope=\"col\">Actions</CTableHeaderCell>\r\n                </CTableRow>\r\n              </CTableHead>\r\n              <CTableBody>\r\n                {orders.length > 0 ? (\r\n                  orders.map((order) => (\r\n                    <CTableRow key={order._id}>\r\n                      <CTableDataCell>{order.numero}</CTableDataCell>\r\n                      <CTableDataCell>{order.email}</CTableDataCell>\r\n                      <CTableDataCell>{order.status}</CTableDataCell>\r\n                      <CTableDataCell>{moment(order.createdAt).format(\"DD/MM/YYYY H:mm\")}</CTableDataCell>\r\n                      <CTableDataCell>\r\n                        <CButton\r\n                          color={\"primary\"}\r\n                          className=\"me-1\"\r\n                          onClick={() => handleNavigation(order._id)}\r\n                        >\r\n                          {\" \"}\r\n                          Voir{\" \"}\r\n                        </CButton>\r\n                      </CTableDataCell>\r\n                    </CTableRow>\r\n                  ))\r\n                ) : (\r\n                  <h3>{\"NO Items\"}</h3>\r\n                )}\r\n              </CTableBody>\r\n            </CTable>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n  );\r\n};\r\n\r\nexport default Commandes;\r\n","export const variable = {\r\n    env: 'prod', // local | prod\r\n    endpointLocal: 'http://127.0.0.1:5059',\r\n    endpointProd:'https://projet-eats-nrh.herokuapp.com',\r\n    endpointFront:'http://localhost:3232',\r\n}","import React from 'react'\r\nimport {CAlert} from '@coreui/react'\r\n\r\nconst Message = ({variant, children}) => {\r\n    return <CAlert color={variant}>\r\n        { children }\r\n    </CAlert>\r\n}\r\n\r\nMessage.defaultProps = {\r\n    variant: 'info'\r\n}\r\n\r\nexport default Message\r\n","import React from 'react'\r\nimport {CSpinner} from '@coreui/react'\r\n\r\nconst Loader = () => {\r\n    return <>\r\n    <CSpinner color=\"primary\" >\r\n        <span className='sr-only'>Loading ...</span>\r\n    </CSpinner>\r\n    </>\r\n}\r\n\r\nexport default Loader","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getOrders = async (id = null, status = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let url = null\r\n\r\n        if (id) {\r\n            url = `${endpoint}/api/orders/${id}`\r\n        } else if (status) {\r\n            url = `${endpoint}/api/orders?status=${status}`\r\n        } else {\r\n            url = `${endpoint}/api/orders`\r\n        }\r\n\r\n        const { data } = await axios.get(`${url}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const createOrders = async (body) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.post(`${endpoint}/api/orders`, body, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const sendFactureFunction = async (id) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.get(`${endpoint}/api/facture/${id}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}"],"sourceRoot":""}