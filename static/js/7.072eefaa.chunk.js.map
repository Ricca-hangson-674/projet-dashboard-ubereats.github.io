{"version":3,"sources":["configs/variable.js","components/Message.js","components/Loader.js","provider/categorieFetch.js","provider/optionListFetch.js","provider/foodFetch.js","views/foods/AjoutFood.js"],"names":["variable","env","endpointLocal","endpointProd","Message","variant","children","color","defaultProps","Loader","className","getCategories","a","id","config","headers","endpoint","url","axios","get","data","status","message","response","error","addCategorie","categorie","reponse","put","post","getOptionLists","addOptionList","optionList","getFoods","addFood","food","schemaUser","yup","shape","name","required","description","price","typeError","category","optionLists","isPopular","available","promotion","AjoutFood","useState","setMessage","success","setSuccess","setError","categories","setCategories","setOptionLists","history","useHistory","useParams","paramQuery","window","location","hash","paramsJS","URLSearchParams","substring","lastIndexOf","restaurantParam","has","categoryParam","optionListsParam","console","log","useForm","resolver","yupResolver","mode","defaultValues","priceDrop","register","handleSubmit","formState","errors","isSubmitting","isValid","resetField","setValue","control","useEffect","resp","resp1","map","o","value","_id","label","fetch","onSubmit","body","length","restaurant","optionListFor","foods","xs","sm","onClick","push","noValidate","md","htmlFor","type","invalid","defaultValue","c","to","render","field","onChange","onBlur","isMulti","options","style","display"],"mappings":"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","file":"static/js/7.072eefaa.chunk.js","sourcesContent":["export const variable = {\r\n    env: 'prod', // local | prod\r\n    endpointLocal: 'http://127.0.0.1:5059',\r\n    endpointProd:'https://projet-eats-nrh.herokuapp.com'\r\n}","import React from 'react'\r\nimport {CAlert} from '@coreui/react'\r\n\r\nconst Message = ({variant, children}) => {\r\n    return <CAlert color={variant}>\r\n        { children }\r\n    </CAlert>\r\n}\r\n\r\nMessage.defaultProps = {\r\n    variant: 'info'\r\n}\r\n\r\nexport default Message\r\n","import React from 'react'\r\nimport {CSpinner} from '@coreui/react'\r\n\r\nconst Loader = () => {\r\n    return <>\r\n    <CSpinner color=\"primary\" >\r\n        <span className='sr-only'>Loading ...</span>\r\n    </CSpinner>\r\n    </>\r\n}\r\n\r\nexport default Loader","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getCategories = async (id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const url  = id ? `${endpoint}/api/categories/${id}` : `${endpoint}/api/categories`\r\n\r\n        const { data } = await axios.get(`${url}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const deleteCategorie = async (id) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        \r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.delete(`${endpoint}/api/categories/${id}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const addCategorie = async (categorie, id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let reponse = null\r\n\r\n        if (id) {\r\n            reponse =  await axios.put(`${endpoint}/api/categories/${id}`, categorie, config)\r\n        } else {\r\n            reponse =  await axios.post(`${endpoint}/api/categories`, categorie, config)\r\n        }\r\n\r\n        return {status: true, data: reponse?.data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getOptionLists = async (id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const url  = id ? `${endpoint}/api/optionLists/${id}` : `${endpoint}/api/optionLists`\r\n\r\n        const { data } = await axios.get(`${url}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const deleteOptionList = async (id) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        \r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.delete(`${endpoint}/api/optionLists/${id}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const addOptionList = async (optionList, id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let reponse = null\r\n\r\n        if (id) {\r\n            reponse =  await axios.put(`${endpoint}/api/optionLists/${id}`, optionList, config)\r\n        } else {\r\n            reponse =  await axios.post(`${endpoint}/api/optionLists`, optionList, config)\r\n        }\r\n\r\n        return {status: true, data: reponse?.data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getFoods = async (id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const url  = id ? `${endpoint}/api/foods/${id}` : `${endpoint}/api/foods`\r\n\r\n        const { data } = await axios.get(`${url}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const deletefood = async (id) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        \r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.delete(`${endpoint}/api/foods/${id}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const addFood = async (food, id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let reponse = null\r\n\r\n        if (id) {\r\n            reponse =  await axios.put(`${endpoint}/api/foods/${id}`, food, config)\r\n        } else {\r\n            reponse =  await axios.post(`${endpoint}/api/foods`, food, config)\r\n        }\r\n\r\n        return {status: true, data: reponse?.data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CForm,\r\n  CButton,\r\n  CFormLabel,\r\n  CFormInput,\r\n  CFormFeedback,\r\n  CButtonGroup,\r\n  CFormSwitch,\r\n  CFormSelect,\r\n} from \"@coreui/react\";\r\n\r\nimport Select from \"react-select\";\r\n\r\nimport { Authentification } from \"../../components/index\";\r\n\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\n\r\nimport { Link, useHistory, useParams } from \"react-router-dom\";\r\n\r\nimport Message from \"../../components/Message\";\r\nimport Loader from \"../../components/Loader\";\r\n\r\nimport { getFoods, addFood } from \"../../provider/foodFetch\";\r\nimport { getOptionLists, addOptionList } from \"../../provider/optionListFetch\";\r\nimport { getCategories, addCategorie } from \"../../provider/categorieFetch\";\r\n\r\nconst schemaUser = yup.object().shape({\r\n  name: yup.string().required(\"name is required\"),\r\n  description: yup.string().required(\"description is required\"),\r\n  price: yup\r\n    .number()\r\n    .typeError(\"price must be a `number` type\")\r\n    .required(\"price are required\"),\r\n  // priceDrop: yup.number(),\r\n  // priceDrop: yup.nullable(),\r\n  category: yup.string().required(\"categorie are required\"),\r\n  optionLists: yup.array(),\r\n  isPopular: yup.boolean(),\r\n  available: yup.boolean(),\r\n  promotion: yup.boolean(),\r\n  // countInStock: yup.number().required(\"priceDrop are required\"),\r\n});\r\n\r\nconst AjoutFood = () => {\r\n  /** State */\r\n  const [message, setMessage] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [categories, setCategories] = useState(null);\r\n  const [optionLists, setOptionLists] = useState(null);\r\n\r\n  /** Hook Route */\r\n  let history = useHistory();\r\n  let { id } = useParams();\r\n  const paramQuery = window.location.hash;\r\n  const paramsJS = new URLSearchParams(\r\n    paramQuery.substring(paramQuery.lastIndexOf(\"?\"))\r\n  );\r\n  const restaurantParam = paramsJS.has(\"restaurant\")\r\n    ? paramsJS.get(\"restaurant\")\r\n    : \"restaurant\";\r\n  const categoryParam = paramsJS.has(\"category\")\r\n    ? paramsJS.get(\"category\")\r\n    : \"category\";\r\n  const optionListsParam = paramsJS.has(\"optionLists\")\r\n    ? paramsJS.get(\"optionLists\")\r\n    : [];\r\n\r\n  console.log(\r\n    \"params\",\r\n    paramQuery.substring(paramQuery.lastIndexOf(\"?\")),\r\n    categoryParam,\r\n    optionListsParam,\r\n    restaurantParam\r\n  );\r\n\r\n  /** Form Hook */\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isSubmitting, isValid },\r\n    resetField,\r\n    setValue,\r\n    control,\r\n  } = useForm({\r\n    resolver: yupResolver(schemaUser),\r\n    mode: \"onTouched\",\r\n    defaultValues: { priceDrop: 0 },\r\n  });\r\n\r\n  /** Run once, when the component mounts */\r\n  useEffect(() => {\r\n    console.log(\"Run once, when the component mounts \");\r\n\r\n    async function fetch() {\r\n      const resp = await getOptionLists(null, null);\r\n\r\n      const resp1 = await getCategories(null, null);\r\n\r\n      if (resp?.status) {\r\n        setOptionLists([\r\n          ...resp.data.map((o) => {\r\n            return { value: o._id, label: o.name };\r\n          }),\r\n        ]);\r\n      } else {\r\n        setMessage(resp?.error);\r\n      }\r\n\r\n      if (resp1?.status) {\r\n        setCategories([...resp1.data]);\r\n      } else {\r\n        setMessage(resp1?.error);\r\n      }\r\n    }\r\n\r\n    fetch();\r\n  }, []);\r\n\r\n  /** Dependency */\r\n  useEffect(() => {\r\n    console.log(\"useEffect, Dependency\");\r\n\r\n    if (id) {\r\n      async function fetch() {\r\n        const resp = await getFoods(null, null);\r\n\r\n        if (resp?.status) {\r\n          setValue(\"name\", resp?.data.name);\r\n          setValue(\"description\", resp?.data.description);\r\n          setValue(\"price\", resp?.data.price);\r\n          setValue(\"priceDrop\", resp?.data.priceDrop);\r\n          setValue(\"category\", resp?.data.category);\r\n          setValue(\"optionLists\", resp?.data.optionLists);\r\n          setValue(\"isPopular\", resp?.data.isPopular);\r\n          setValue(\"available\", resp?.data.available);\r\n          setValue(\"promotion\", resp?.data.promotion);\r\n          // setValue(\"countInStock\", resp?.data.countInStock);\r\n        } else {\r\n          setMessage(resp?.error);\r\n        }\r\n      }\r\n\r\n      fetch();\r\n    }\r\n  }, [id, setValue]);\r\n\r\n  const onSubmit = async (data) => {\r\n    let resp = null;\r\n    let body = null;\r\n\r\n    if (data?.optionLists) {\r\n      if (data?.optionLists?.length)\r\n        body = { ...data, optionLists: data.optionLists.map((o) => o.value) };\r\n    } else {\r\n      console.log(\"body\", body);\r\n      body = { ...data };\r\n    }\r\n\r\n    console.log(\"onSubmit\", data, body);\r\n    // console.log(\"isValid\", isValid);\r\n\r\n    if (isValid && body) {\r\n      /** reste */\r\n      setSuccess(false);\r\n      setError(false);\r\n      resp = await addFood(body, id);\r\n    }\r\n\r\n    if (resp?.status) {\r\n      /** Reset */\r\n\r\n      resetField(\"name\");\r\n      resetField(\"description\");\r\n      resetField(\"price\");\r\n      resetField(\"priceDrop\");\r\n      resetField(\"category\");\r\n      resetField(\"optionLists\");\r\n      resetField(\"isPopular\");\r\n      resetField(\"available\");\r\n      resetField(\"promotion\");\r\n      // resetField(\"countInStock\");\r\n\r\n      if (body.category) {\r\n        if (restaurantParam)\r\n          await addCategorie({ restaurant: restaurantParam }, body.category);\r\n      }\r\n\r\n      if (body.optionLists) {\r\n        if (body.optionLists.length) {\r\n          for (const optionListFor of body.optionLists) {\r\n            console.log(\"optionListFor\", optionListFor);\r\n            await addOptionList({ foods: [resp?.data?._id] }, optionListFor);\r\n          }\r\n        }\r\n      }\r\n\r\n      setSuccess(true);\r\n    } else {\r\n      setError(true);\r\n      setMessage(resp?.error);\r\n    }\r\n  };\r\n\r\n  const back = () => {\r\n    history.push(`/restaurants`);\r\n  };\r\n\r\n  if (categories === null || optionLists === null) {\r\n    return <Loader />;\r\n  }\r\n\r\n  console.log(\"errors\", errors);\r\n\r\n  return (\r\n    <CRow>\r\n      <Authentification />\r\n      {error && <Message> {message}</Message>}\r\n      {success && <Message> {`Success Ajout ou Edite`}</Message>}\r\n      <CCol xs={12}>\r\n        <CCard className=\"mb-4\">\r\n          <CCardHeader>\r\n            <CRow>\r\n              <CCol sm={5}>\r\n                <strong>Ajout Food</strong>\r\n              </CCol>\r\n              <CCol sm={7}>\r\n                <CButtonGroup className=\"float-end me-3\">\r\n                  <CButton\r\n                    color=\"outline-secondary\"\r\n                    className=\"mx-0\"\r\n                    onClick={() => back()}\r\n                  >\r\n                    Retour\r\n                  </CButton>\r\n                </CButtonGroup>\r\n              </CCol>\r\n            </CRow>\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <CForm\r\n              noValidate\r\n              className={`row g-3`}\r\n              onSubmit={handleSubmit(onSubmit)}\r\n            >\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"name\">Name</CFormLabel>\r\n                <CFormInput\r\n                  type=\"text\"\r\n                  id=\"name\"\r\n                  required\r\n                  {...register(\"name\")}\r\n                  invalid={errors.name ? true : false}\r\n                />\r\n                <CFormFeedback invalid>{errors.name?.message}</CFormFeedback>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"lastName\">Description</CFormLabel>\r\n                <CFormInput\r\n                  type=\"text\"\r\n                  id=\"description\"\r\n                  required\r\n                  {...register(\"description\")}\r\n                  invalid={errors.description ? true : false}\r\n                />\r\n                <CFormFeedback invalid>\r\n                  {errors.description?.message}\r\n                </CFormFeedback>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"price\">Price</CFormLabel>\r\n                <CFormInput\r\n                  type=\"number\"\r\n                  id=\"price\"\r\n                  required\r\n                  {...register(\"price\")}\r\n                  invalid={errors.price ? true : false}\r\n                />\r\n                <CFormFeedback invalid>{errors.price?.message}</CFormFeedback>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"priceDrop\">PriceDrop</CFormLabel>\r\n                <CFormInput\r\n                  type=\"number\"\r\n                  id=\"priceDrop\"\r\n                  {...register(\"priceDrop\")}\r\n                />\r\n                <CFormFeedback invalid>\r\n                  {errors.priceDrop?.message}\r\n                </CFormFeedback>\r\n              </CCol>\r\n              <CCol md={3}>\r\n                <CFormSwitch\r\n                  label=\"isPopular\"\r\n                  id=\"isPopular\"\r\n                  {...register(\"isPopular\")}\r\n                />\r\n              </CCol>\r\n              <CCol md={3}>\r\n                <CFormSwitch\r\n                  label=\"available\"\r\n                  id=\"available\"\r\n                  {...register(\"available\")}\r\n                />\r\n              </CCol>\r\n              <CCol md={3}>\r\n                <CFormSwitch\r\n                  label=\"promotion\"\r\n                  id=\"promotion\"\r\n                  {...register(\"promotion\")}\r\n                />\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"categorie\">Categorie</CFormLabel>\r\n                <CFormSelect\r\n                  aria-label=\"Categorie\"\r\n                  id=\"categorie\"\r\n                  required\r\n                  {...register(\"category\")}\r\n                  invalid={errors.category ? true : false}\r\n                  defaultValue={categories[0]?._id && categories[0]?._id}\r\n                >\r\n                  {categories?.length &&\r\n                    categories.map((c) => (\r\n                      <option value={c._id} key={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                </CFormSelect>\r\n                <CFormFeedback invalid>\r\n                  {errors.category?.message}\r\n                </CFormFeedback>\r\n                <small className=\"form-text text-muted\">\r\n                  <Link to={`/ajout-categorie?restaurant=${restaurantParam}`}>\r\n                    Ajouter une categorie\r\n                  </Link>{\" \"}\r\n                </small>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"optionLists\">Option Liste</CFormLabel>\r\n                <Controller\r\n                  control={control}\r\n                  name=\"optionLists\"\r\n                  render={({\r\n                    field: { onChange, onBlur, value, name },\r\n                    // field,\r\n                    // fieldState: { error },\r\n                  }) => (\r\n                    <>\r\n                      <Select\r\n                        defaultValue={value}\r\n                        value={value}\r\n                        name={name}\r\n                        onBlur={onBlur}\r\n                        onChange={onChange}\r\n                        // {...field}\r\n                        isMulti\r\n                        options={optionLists}\r\n                      />\r\n                      <small className=\"form-text text-muted\">\r\n                        <Link\r\n                          to={`/ajout-optionList?foods=${`foods`}&options=${`options`}`}\r\n                        >\r\n                          Ajouter un option Liste\r\n                        </Link>{\" \"}\r\n                      </small>\r\n                      {errors.optionLists?.message && (\r\n                        <div\r\n                          style={{ display: \"block\" }}\r\n                          className=\"invalid-feedback\"\r\n                        >\r\n                          {errors.optionLists?.message}\r\n                        </div>\r\n                      )}\r\n                    </>\r\n                  )}\r\n                />\r\n              </CCol>\r\n              <CCol xs={12}>\r\n                <CButton\r\n                  color=\"primary\"\r\n                  type=\"submit\"\r\n                  className={isSubmitting ? \"disabled\" : \" \"}\r\n                >\r\n                  Submit\r\n                </CButton>\r\n              </CCol>\r\n            </CForm>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n  );\r\n};\r\nexport default AjoutFood;\r\n"],"sourceRoot":""}