(this["webpackJsonpprojet-uber-eats-dashboard"]=this["webpackJsonpprojet-uber-eats-dashboard"]||[]).push([[15],{553:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var n={env:"prod",endpointLocal:"http://127.0.0.1:5059",endpointProd:"https://projet-eats-nrh.herokuapp.com"}},554:function(t,e,a){"use strict";a(0);var n=a(4),r=a(2),c=function(t){var e=t.variant,a=t.children;return Object(r.jsx)(n.a,{color:e,children:a})};c.defaultProps={variant:"info"},e.a=c},557:function(t,e,a){"use strict";a(0);var n=a(4),r=a(2);e.a=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(n.U,{color:"primary",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading ..."})})})}},601:function(t,e,a){"use strict";a.d(e,"b",(function(){return u})),a.d(e,"a",(function(){return l}));var n=a(551),r=a.n(n),c=a(552),s=a(555),o=a.n(s),i=a(553),u=function(){var t=Object(c.a)(r.a.mark((function t(){var e,a,n,c,s,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={headers:{"Content-Type":"application/json"}},a="local"===i.a.env?i.a.endpointLocal:i.a.endpointProd,n="".concat(a,"/api/dashboard"),t.next=6,o.a.get("".concat(n),e);case 6:return c=t.sent,s=c.data,t.abrupt("return",{status:!0,data:s});case 11:return t.prev=11,t.t0=t.catch(0),u=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,t.abrupt("return",{status:!1,error:u});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}(),l=function(){var t=Object(c.a)(r.a.mark((function t(e){var a,n,c,s,u,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={headers:{"Content-Type":"application/json"}},n="local"===i.a.env?i.a.endpointLocal:i.a.endpointProd,c="".concat(n,"/api/dashboard/chiffres-affaires"),t.next=6,o.a.post("".concat(c),e,a);case 6:return s=t.sent,u=s.data,t.abrupt("return",{status:!0,data:u});case 11:return t.prev=11,t.t0=t.catch(0),l=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message,t.abrupt("return",{status:!1,error:l});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},784:function(t,e,a){"use strict";a.r(e);var n=a(566),r=a(558),c=a(551),s=a.n(c),o=a(28),i=a(552),u=a(556),l=a(0),d=a(638),j=a.n(d),b=a(4),p=a(762),h=a(763),O=a(174),f=a(601),v=a(557),m=a(554),x=a(2),g=Object(l.lazy)((function(){return a.e(33).then(a.bind(null,778))}));e.default=function(){var t=Object(l.useState)(null),e=Object(u.a)(t,2),a=e[0],c=e[1],d=Object(l.useState)(null),y=Object(u.a)(d,2),C=y[0],N=y[1],D=Object(l.useState)(null),S=Object(u.a)(D,2),Y=S[0],A=S[1],E=Object(l.useState)(null),M=Object(u.a)(E,2),R=M[0],k=M[1],I=Object(l.useState)("Day"),w=Object(u.a)(I,2),B=w[0],G=w[1],T=Object(l.useState)("READING"),P=Object(u.a)(T,2),L=P[0],F=P[1],W=Object(l.useState)(null),_=Object(u.a)(W,2),H=_[0],U=_[1],J=Object(l.useState)(null),z=Object(u.a)(J,2),Z=z[0],q=z[1];Object(l.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var e,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.b)();case 2:return e=t.sent,t.next=5,Object(f.a)();case 5:a=t.sent,(null===e||void 0===e?void 0:e.status)?c(Object(o.a)({},null===e||void 0===e?void 0:e.data)):A(null===e||void 0===e?void 0:e.error),(null===a||void 0===a?void 0:a.status)?N(Object(o.a)({},null===a||void 0===a?void 0:a.data)):k(null===a||void 0===a?void 0:a.error);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("Run once, when the component mounts"),function(){t.apply(this,arguments)}()}),[]),Object(l.useEffect)((function(){var t;console.log("Dependency");var e,a=[],c=[],s=[];if("Day"===B)(null===C||void 0===C||null===(e=C.ordersChiffresGroupedByDayStatus)||void 0===e?void 0:e.length)&&(s=Object(r.a)(null===C||void 0===C?void 0:C.ordersChiffresGroupedByDayStatus));else if("Month"===B){var o;(null===C||void 0===C||null===(o=C.ordersChiffresGroupedByMonthWithStatus)||void 0===o?void 0:o.length)&&(s=Object(r.a)(null===C||void 0===C?void 0:C.ordersChiffresGroupedByMonthWithStatus))}else if("Year"===B){var i;(null===C||void 0===C||null===(i=C.ordersChiffresGroupedByYearWithStatus)||void 0===i?void 0:i.length)&&(s=Object(r.a)(null===C||void 0===C?void 0:C.ordersChiffresGroupedByYearWithStatus))}if(null===(t=s)||void 0===t?void 0:t.length){var u,l=Object(n.a)(s);try{for(l.s();!(u=l.n()).done;){var d=u.value;L===d.status&&("Day"===B?(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("DD/MM/YYYY")]),c=[].concat(Object(r.a)(c),[d.total])):"Month"===B?(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("MM/YYYY")]),c=[].concat(Object(r.a)(c),[d.total])):"Year"===B&&(a=[].concat(Object(r.a)(a),[j()(d.updatedAt).format("YYYY")]),c=[].concat(Object(r.a)(c),[d.total])))}}catch(b){l.e(b)}finally{l.f()}q(Object(r.a)(c)),U(Object(r.a)(a))}}),[L,B,C]);var K=function(t,e){"status"===e?F(t):"type"===e&&G(t)};return null===a||null===C?Object(x.jsx)(v.a,{}):R?Object(x.jsxs)(m.a,{children:[" ",R]}):Y?Object(x.jsxs)(m.a,{children:[" ",Y]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(O.f,{}),Object(x.jsx)(g,{countClient:a.countClient,countCommercant:a.countCommercant,countAdmin:a.countAdmin,countOrder:a.countOrder}),Object(x.jsxs)(b.h,{className:"mb-4",children:[Object(x.jsxs)(b.i,{children:[Object(x.jsxs)(b.P,{children:[Object(x.jsxs)(b.o,{sm:5,children:[Object(x.jsx)("h4",{id:"traffic",className:"card-title mb-0",children:"Commandes"}),Object(x.jsx)("div",{className:"small text-medium-emphasis",children:j()().format("DD/MMM/YYYY h:mm:ss A")})]}),Object(x.jsxs)(b.o,{sm:7,className:"d-none d-md-block",children:[Object(x.jsx)(b.B,{value:L,"aria-label":"Status",className:"float-end mb-1",onChange:function(t){K(t.target.value,"status")},children:["ORDER_STATUS_UNSPECIFIED","CONFIRMED","PENDING","PENDING_MERCHANT_CONFIRMATION","CANCELED","FAILED","DECLINED_BY_MERCHANT","READING"].map((function(t){return Object(x.jsx)("option",{value:t,children:t},t)}))}),Object(x.jsx)(b.g,{className:"float-end me-3",children:["Day","Month","Year"].map((function(t){return Object(x.jsx)(b.f,{onClick:function(){return K(t,"type")},color:"outline-secondary",className:"mx-0",active:t===B,children:t},t)}))})]})]}),Object(x.jsx)(p.a,{style:{height:"300px",marginTop:"40px"},data:{labels:null!==H?Object(r.a)(H):[],datasets:[{label:"Commandes par ".concat(B),backgroundColor:Object(h.hexToRgba)(Object(h.getStyle)("--cui-info"),10),borderColor:Object(h.getStyle)("--cui-info"),pointHoverBackgroundColor:Object(h.getStyle)("--cui-info"),borderWidth:2,data:null!==Z?Object(r.a)(Z):[],fill:!0}]},options:{maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{grid:{drawOnChartArea:!1}},y:{ticks:{beginAtZero:!0,maxTicksLimit:5}}},elements:{line:{tension:.4},point:{height:5,radius:5,hitRadius:10,hoverRadius:4,hoverBorderWidth:3}}}})]}),Object(x.jsx)(b.j,{children:Object(x.jsx)(b.P,{xs:{cols:1},md:{cols:5},className:"text-center",children:a.orderStat.map((function(t,e){return Object(x.jsxs)(b.o,{className:"mb-sm-2 mb-0",children:[Object(x.jsx)("div",{className:"text-medium-emphasis",children:t.title}),Object(x.jsxs)("strong",{children:[t.value," (",t.percent,"%)"]}),Object(x.jsx)(b.O,{thin:!0,className:"mt-2",color:t.color,value:(null===t||void 0===t?void 0:t.percent)?Number(null===t||void 0===t?void 0:t.percent):0})]},e)}))})})]})]})}}}]);
//# sourceMappingURL=15.3b850c1f.chunk.js.map