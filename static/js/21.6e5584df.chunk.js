(this["webpackJsonpprojet-uber-eats-dashboard"]=this["webpackJsonpprojet-uber-eats-dashboard"]||[]).push([[21],{550:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={env:"prod",endpointLocal:"http://127.0.0.1:5059",endpointProd:"https://projet-eats-nrh.herokuapp.com"}},551:function(e,t,a){"use strict";a(0);var n=a(4),r=a(2),s=function(e){var t=e.variant,a=e.children;return Object(r.jsx)(n.a,{color:t,children:a})};s.defaultProps={variant:"info"},t.a=s},774:function(e,t,a){"use strict";a.r(t);var n=a(28),r=a(548),s=a.n(r),c=a(549),i=a(552),o=a(0),u=a(4),d=a(174),l=a(561),p=a(568),j=a(566),b=a(26),h=a(551),v=a(554),m=a.n(v),f=a(550),O=function(){var e=Object(c.a)(s.a.mark((function e(){var t,a,n,r,c,i,o,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:null,e.prev=1,a={headers:{"Content-Type":"application/json"}},n="local"===f.a.env?f.a.endpointLocal:f.a.endpointProd,r=t?"".concat(n,"/api/categories/").concat(t):"".concat(n,"/api/categories"),e.next=7,m.a.get("".concat(r),a);case 7:return c=e.sent,i=c.data,e.abrupt("return",{status:!0,data:i});case 12:return e.prev=12,e.t0=e.catch(1),o=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,e.abrupt("return",{status:!1,error:o});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,r,c,i,o,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>1&&void 0!==u[1]?u[1]:null,e.prev=1,r={headers:{"Content-Type":"application/json"}},c="local"===f.a.env?f.a.endpointLocal:f.a.endpointProd,i=null,!a){e.next=11;break}return e.next=8,m.a.put("".concat(c,"/api/categories/").concat(a),t,r);case 8:i=e.sent,e.next=14;break;case 11:return e.next=13,m.a.post("".concat(c,"/api/categories"),t,r);case 13:i=e.sent;case 14:return e.abrupt("return",{status:!0,data:null===(n=i)||void 0===n?void 0:n.data});case 17:return e.prev=17,e.t0=e.catch(1),o=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message,e.abrupt("return",{status:!1,error:o});case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),g=a(2),w=j.d().shape({name:j.f().required("name is required"),description:j.f().required("description is required"),restaurant:j.f().required("restaurant are required")});t.default=function(){var e,t,a=Object(o.useState)(null),r=Object(i.a)(a,2),j=r[0],v=r[1],m=Object(o.useState)(!1),f=Object(i.a)(m,2),y=f[0],k=f[1],S=Object(o.useState)(!1),q=Object(i.a)(S,2),N=q[0],P=q[1],A=Object(o.useState)(!1),C=Object(i.a)(A,2),L=C[0],F=C[1],R=Object(b.g)(),T=Object(b.i)().id,V=window.location.hash,z=new URLSearchParams(V.substring(V.lastIndexOf("?"))),E=z.has("restaurant")?z.get("restaurant"):"restaurant";console.log("params",V.substring(V.lastIndexOf("?")),E);var I=Object(l.d)({resolver:Object(p.a)(w),mode:"onTouched",defaultValues:{restaurant:E}}),J=I.register,D=I.handleSubmit,U=I.formState,_=U.errors,B=U.isSubmitting,G=U.isValid,H=I.resetField,K=I.setValue;Object(o.useEffect)((function(){if(console.log("Run once, when the component mounts"),T){var e=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(null,T);case 2:(null===(t=e.sent)||void 0===t?void 0:t.status)?(K("name",null===t||void 0===t?void 0:t.data.name),K("description",null===t||void 0===t?void 0:t.data.description),K("restaurant",null===t||void 0===t?void 0:t.data.restaurant)):v(null===t||void 0===t?void 0:t.error);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[T,K]);var M=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!G){e.next=7;break}return k(!1),P(!1),e.next=6,x(t,T);case 6:n=e.sent;case 7:(null===(a=n)||void 0===a?void 0:a.status)?(H("name"),H("description"),H("restaurant"),F(null===(r=n)||void 0===r?void 0:r.data._id),k(!0)):(P(!0),v(null===(c=n)||void 0===c?void 0:c.error));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(u.P,{children:[Object(g.jsx)(d.f,{}),N&&Object(g.jsxs)(h.a,{children:[" ",j]}),y&&Object(g.jsxs)(h.a,{children:[" ","Success Ajout ou Edite"]}),Object(g.jsx)(u.o,{xs:12,children:Object(g.jsxs)(u.h,{className:"mb-4",children:[Object(g.jsx)(u.l,{children:Object(g.jsxs)(u.P,{children:[Object(g.jsx)(u.o,{sm:5,children:Object(g.jsx)("strong",{children:"Ajout Categorie"})}),Object(g.jsx)(u.o,{sm:7,children:Object(g.jsx)(u.g,{className:"float-end me-3",children:Object(g.jsx)(u.f,{color:"outline-secondary",className:"mx-0",onClick:function(){R.push("/ajout-food/".concat(L))},children:"Retour"})})})]})}),Object(g.jsx)(u.i,{children:Object(g.jsxs)(u.x,{className:"row g-3 needs-validation ".concat(G&&"was-validated"),onSubmit:D(M),children:[Object(g.jsxs)(u.o,{md:6,children:[Object(g.jsx)(u.A,{htmlFor:"name",children:"Name"}),Object(g.jsx)(u.z,Object(n.a)({type:"text",id:"name",required:!0},J("name"))),Object(g.jsx)(u.y,{invalid:!0,children:null===(e=_.name)||void 0===e?void 0:e.message})]}),Object(g.jsxs)(u.o,{md:6,children:[Object(g.jsx)(u.A,{htmlFor:"lastName",children:"Description"}),Object(g.jsx)(u.z,Object(n.a)({type:"text",id:"description",required:!0},J("description"))),Object(g.jsx)(u.y,{invalid:!0,children:null===(t=_.description)||void 0===t?void 0:t.message})]}),Object(g.jsx)(u.o,{xs:12,children:Object(g.jsx)(u.f,{color:"primary",type:"submit",className:B?"disabled":" ",children:"Submit"})})]})})]})})]})}}}]);
//# sourceMappingURL=21.6e5584df.chunk.js.map