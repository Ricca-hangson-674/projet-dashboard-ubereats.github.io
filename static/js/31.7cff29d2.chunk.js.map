{"version":3,"sources":["configs/variable.js","components/Message.js","provider/paiementFetch.js","views/paiements/AjoutPaiement.js"],"names":["variable","env","endpointLocal","endpointProd","Message","variant","children","color","defaultProps","getPaiements","a","id","config","headers","endpoint","url","axios","get","data","status","message","response","error","deletePaiement","delete","addPaiement","paiement","reponse","put","post","schemaUser","yup","shape","name","required","iban","montant","datePaiement","AjoutPaiement","useState","setMessage","success","setSuccess","setError","history","useHistory","idPaiement","useParams","useForm","resolver","yupResolver","mode","register","handleSubmit","formState","errors","isSubmitting","isValid","resetField","setValue","useEffect","console","log","fetch","resp","firstName","lastName","email","onSubmit","xs","className","sm","onClick","push","md","htmlFor","type","invalid","step"],"mappings":"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","file":"static/js/31.7cff29d2.chunk.js","sourcesContent":["export const variable = {\r\n    env: 'prod', // local | prod\r\n    endpointLocal: 'http://127.0.0.1:5059',\r\n    endpointProd:'https://projet-eats-nrh.herokuapp.com',\r\n}","import React from 'react'\r\nimport {CAlert} from '@coreui/react'\r\n\r\nconst Message = ({variant, children}) => {\r\n    return <CAlert color={variant}>\r\n        { children }\r\n    </CAlert>\r\n}\r\n\r\nMessage.defaultProps = {\r\n    variant: 'info'\r\n}\r\n\r\nexport default Message\r\n","import axios from 'axios'\r\nimport { variable } from '../configs/variable'\r\n\r\nexport const getPaiements = async (id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const url  = id ? `${endpoint}/api/paiements/${id}` : `${endpoint}/api/paiements`\r\n\r\n        const { data } = await axios.get(`${url}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const deletePaiement = async (id) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n        \r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        const { data } = await axios.delete(`${endpoint}/api/paiements/${id}`, config)\r\n\r\n        return {status: true, data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}\r\n\r\nexport const addPaiement = async (paiement, id = null) => {\r\n    try {\r\n\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        const endpoint = variable.env === 'local' ? variable.endpointLocal : variable.endpointProd\r\n\r\n        let reponse = null\r\n\r\n        if (id) {\r\n            reponse =  await axios.put(`${endpoint}/api/paiements/${id}`, paiement, config)\r\n        } else {\r\n            reponse =  await axios.post(`${endpoint}/api/paiements`, paiement, config)\r\n        }\r\n\r\n        return {status: true, data: reponse?.data}\r\n    } catch (error) {\r\n        const message = error.response && error.response.data.message\r\n                ? error.response.data.message\r\n                : error.message\r\n        \r\n        return {status: false, error: message}\r\n    }\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  CCard,\r\n  CCardBody,\r\n  CCardHeader,\r\n  CCol,\r\n  CRow,\r\n  CForm,\r\n  CButton,\r\n  CFormLabel,\r\n  CFormInput,\r\n  CFormFeedback,\r\n  CButtonGroup,\r\n} from \"@coreui/react\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\n\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nimport Message from \"../../components/Message\";\r\nimport { Authentification } from \"../../components/index\";\r\n\r\nimport { getPaiements, addPaiement } from '../../provider/paiementFetch'\r\n\r\nconst schemaUser = yup.object().shape({\r\n  name: yup.string().required(\"name is required\"),\r\n  iban: yup.string().required(\"iban is required\"),\r\n  montant: yup.number().required(\"montant is required\"),\r\n  datePaiement: yup.date().required(\"datePaiement is required\"),\r\n});\r\n\r\nconst AjoutPaiement = () => {\r\n  /** State */\r\n  const [message, setMessage] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [error, setError] = useState(false);\r\n\r\n  /** Hook Route */\r\n  let history = useHistory();\r\n  let { id: idPaiement } = useParams();\r\n\r\n  /** Form Hook */\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors, isSubmitting, isValid },\r\n    resetField,\r\n    setValue,\r\n  } = useForm({\r\n    resolver: yupResolver(schemaUser),\r\n    mode: \"onTouched\",\r\n  });\r\n\r\n  /** Run once, when the component mounts */\r\n  useEffect(() => {\r\n    console.log(\"Run once, when the component mounts\");\r\n\r\n    if (idPaiement) {\r\n      async function fetch() {\r\n        const resp = await getPaiements(idPaiement);\r\n\r\n        if (resp?.status) {\r\n          setValue(\"firstName\", resp?.data.firstName);\r\n          setValue(\"lastName\", resp?.data.lastName);\r\n          setValue(\"email\", resp?.data.email);\r\n          setValue(\"password\", \"\");\r\n        } else {\r\n          setMessage(resp?.error);\r\n        }\r\n      }\r\n\r\n      fetch();\r\n    }\r\n  }, [idPaiement, setValue]);\r\n\r\n  const onSubmit = async (data) => {\r\n    let resp = null;\r\n\r\n    if (isValid) {\r\n      /** reste */\r\n      setSuccess(false);\r\n      setError(false);\r\n      resp = await addPaiement(data, idPaiement);\r\n    }\r\n\r\n    if (resp?.status) {\r\n      /** Reset */\r\n      resetField(\"name\");\r\n      resetField(\"iban\");\r\n      resetField(\"montant\");\r\n      resetField(\"datePaiement\");\r\n\r\n      setSuccess(true);\r\n    } else {\r\n      setError(true);\r\n      setMessage(resp?.error);\r\n    }\r\n  };\r\n\r\n  const back = () => {\r\n    history.push(`/paiements`);\r\n  };\r\n\r\n  /* console.log(\r\n    \"errors\",\r\n    errors,\r\n    isSubmitted, // true si après l'envoi du formulaire\r\n    isSubmitSuccessful, // true si formulaire a été soumis avec succès sans aucun rejet ou a été lancé dans le rappel\r\n    isSubmitting, // true si formulaire est en cours de soumission\r\n    isValid // true si formulaire ne contient aucune erreur\r\n  ); */\r\n\r\n  console.log('errors', errors)\r\n\r\n  return (\r\n    <CRow>\r\n      <Authentification />\r\n      {error && <Message> {message}</Message>}\r\n      {success && <Message> {`Success Ajout ou Edite`}</Message>}\r\n      <CCol xs={12}>\r\n        <CCard className=\"mb-4\">\r\n          <CCardHeader>\r\n            <CRow>\r\n              <CCol sm={5}>\r\n                <strong>Ajout Paiement</strong>\r\n              </CCol>\r\n              <CCol sm={7}>\r\n                <CButtonGroup className=\"float-end me-3\">\r\n                  <CButton\r\n                    color=\"outline-secondary\"\r\n                    className=\"mx-0\"\r\n                    onClick={() => back()}\r\n                  >\r\n                    Retour\r\n                  </CButton>\r\n                </CButtonGroup>\r\n              </CCol>\r\n            </CRow>\r\n          </CCardHeader>\r\n          <CCardBody>\r\n            <CForm\r\n              className={`row g-3`}\r\n              onSubmit={handleSubmit(onSubmit)}\r\n            >\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"name\">name</CFormLabel>\r\n                <CFormInput\r\n                  type=\"text\"\r\n                  id=\"name\"\r\n                  required\r\n                  {...register(\"name\")}\r\n                />\r\n                <CFormFeedback invalid>\r\n                  {errors.name?.message}\r\n                </CFormFeedback>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"iban\">iban</CFormLabel>\r\n                <CFormInput\r\n                  type=\"text\"\r\n                  id=\"iban\"\r\n                  {...register(\"iban\")}\r\n                />\r\n                <CFormFeedback invalid>\r\n                  {errors.iban?.message}\r\n                </CFormFeedback>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"montant\">montant</CFormLabel>\r\n                <CFormInput\r\n                  type=\"number\"\r\n                  step={\"any\"}\r\n                  id=\"montant\"\r\n                  required\r\n                  {...register(\"montant\")}\r\n                />\r\n                <CFormFeedback invalid>{errors.montant?.message}</CFormFeedback>\r\n              </CCol>\r\n              <CCol md={6}>\r\n                <CFormLabel htmlFor=\"datePaiement\">datePaiement</CFormLabel>\r\n                <CFormInput\r\n                  type=\"datetime\"\r\n                  id=\"datePaiement\"\r\n                  required\r\n                  {...register(\"datePaiement\")}\r\n                />\r\n                <CFormFeedback invalid>\r\n                  {errors.datePaiement?.message}\r\n                </CFormFeedback>\r\n              </CCol>\r\n              <CCol xs={12}>\r\n                <CButton\r\n                  color=\"primary\"\r\n                  type=\"submit\"\r\n                  className={isSubmitting ? \"disabled\" : \" \"}\r\n                >\r\n                  Submit\r\n                </CButton>\r\n              </CCol>\r\n            </CForm>\r\n          </CCardBody>\r\n        </CCard>\r\n      </CCol>\r\n    </CRow>\r\n  );\r\n};\r\n\r\nexport default AjoutPaiement;\r\n"],"sourceRoot":""}